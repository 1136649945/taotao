<extend name="Public/base" />

<block name="body">
<div class="main-title">
	<h2>
		{$info['id']?'编辑':'新增'}导航
	</h2>
</div>
<form action="{:U()}" method="post" class="form-horizontal">
	<input type="hidden" name="pid" value="{$pid}">
	<fieldset class="layui-elem-field" style="margin-top: 10px;">
		<legend>导航标题<a href="javascript:translate('translate');" class="layui-btn layui-btn-xs" lay-event="edit">预翻译</a></legend>
		<div class="layui-form-item">
			<div class="layui-inline">
				<label class="layui-form-label">中文</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="title" id="translate"
						value="{$info.title|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">英文</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titleen"
						value="{$info.titleen|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">韩文</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titleko"
						value="{$info.titleko|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">日文</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titleja"
						value="{$info.titleja|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">法文</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titlefr"
						value="{$info.titlefr|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">俄文</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titleru"
						value="{$info.titleru|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">西班牙</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titlees"
						value="{$info.titlees|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">德语</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titlede"
						value="{$info.titlede|default=''}">
				</div>
			</div>
			<div class="layui-inline">
				<label class="layui-form-label">阿拉伯语</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" name="titlear"
						value="{$info.titlear|default=''}">
				</div>
			</div>
		</div>
	</fieldset>
	<fieldset class="layui-elem-field layui-field-title"
		style="margin-top: 10px;"></fieldset>
	<div class="layui-form-item">
		<div class="layui-inline">
			<label class="layui-form-label">URL连接</label>
			<div class="layui-input-inline" style="width: 490px;">
				<input type="text" class="layui-input" name="url"
					value="{$info.url|default=''}">
			</div>
		</div>
	</div>
	<fieldset class="layui-elem-field layui-field-title"
		style="margin-top: 10px;"></fieldset>
	<div class="layui-form-item">
		<div class="layui-inline">
			<label class="layui-form-label">父级</label>
			<div class="layui-input-inline" style="width: 490px;">
				<select name="pid" style="margin-top: 5px;width: 200px;">
				    <if condition="$childe neq true">
				    	<option value="0" >顶级</option>
				    </if>
					<volist name="parent" id="vo">
						<if condition="$pid eq $vo['id']"> 
							<option value="{$vo.id}" selected="selected">{$vo.title}</option>
						<else />
							<option value="{$vo.id}" >{$vo.title}</option>
						</if>
					</volist>
				</select>
			</div>
		</div>
	</div>
	<fieldset class="layui-elem-field layui-field-title"
		style="margin-top: 10px;"></fieldset>
	<div class="layui-form-item">
		<div class="layui-inline">
			<label class="layui-form-label">分组</label>
			<div class="layui-input-inline" style="width: 490px;">
				<select name="block" style="margin-top: 5px;width: 200px;">
				<volist name="block" id="vo">
					<if condition="$info['block'] eq $vo['id']"> 
						<option value="{$vo.id}" selected="selected">{$vo.title}</option>
					<else />
						<option value="{$vo.id}" >{$vo.title}</option>
					</if>
				</volist>
				</select>
			</div>
		</div>
	</div>
	<fieldset class="layui-elem-field layui-field-title"
		style="margin-top: 10px;"></fieldset>
	<div class="layui-form-item">
		<div class="layui-inline">
			<label class="layui-form-label" style="margin-top: -10px;">发布</label> 
				<label class="radio"><input type="radio" name="hide" value="0">是</label>
	            <label class="radio"><input type="radio" name="hide" value="1" >否</label>
		</div>
	</div>
	<fieldset class="layui-elem-field layui-field-title"
		style="margin-top: 10px;"></fieldset>
	<div class="layui-form-item">
		<div class="layui-inline">
			<label class="layui-form-label">新窗口打开</label> 
			<select name="target" style="margin-top: 5px;">
				<option value="0"<eq name="info.target" value="0">selected</eq>>否
				</option>
				<option value="1"<eq name="info.target" value="1">selected</eq>>是
				</option>
			</select>
		</div>
	</div>

	<fieldset class="layui-elem-field layui-field-title"
		style="margin-top: 10px;"></fieldset>
	<div class="layui-form-item">
		<div class="layui-inline">
			<label class="layui-form-label">优先级</label>
			<div class="layui-input-inline" style="width: 55px;">
				<input type="text" class="layui-input" name="sort"
					value="{$info.sort|default='0'}">
			</div>
		</div>
	</div>
	<div class="form-item"
		style="bottom: 0px; position: fixed; margin-left: 400px;">
		<input type="hidden" name="id" value="{$info.id|default=''}">
		<button class="btn submit-btn ajax-post" id="submit" type="submit"
			target-form="form-horizontal">确 定</button>
		<button class="btn btn-return"
			onclick="javascript:history.back(-1);return false;">返 回</button>
	</div>
</form>
</block>
<block name="script"> <script type="text/javascript"
	charset="utf-8">
		//导航高亮
		highlight_subnav('{:U('index')}');
	    Think.setValue("hide", {$info.hide|default = 0});
	</script> 
	<script type="text/javascript">
		
		var transArr = ['en','jp'];
		var trans = 0;
		function translate(id){
			trans = 0;
			var text = $("#"+id).val();
			if(text && transArr){
				var appid = '2015063000000001';
				var key = '12345678';
				var salt = (new Date).getTime();
				for(idx in transArr){
					var query = text;
					var from = 'zh';
					var to = transArr[idx];
					var str1 = appid + query + salt +key;
					var sign = MD5(str1);
					$.ajax({
					    url: 'http://api.fanyi.baidu.com/api/trans/vip/translate',
					    type: 'post',
					    dataType: 'jsonp',
					    data: {
					        q: query,
					        appid: appid,
					        salt: salt,
					        from: from,
					        to: to,
					        sign: sign
					    },
					    success: function (data) {
					       $("input[name='"+transArr[trans%transArr.length]+"_title']").val(data['trans_result'][0]['dst']);
					       trans++;
					    } 
					});
				}
			}
			
			
		}
		
	</script> 
</block>

